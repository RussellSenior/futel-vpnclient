Build:

have client.crt client.key

  git clone https://git.lede-project.org/source.git build
  cp -r files build
  cp client.crt client.key build/files/etc/openvpn/keys
  cp config-stub build/.config
  cd build
  make defconfig
  time make -j2 BUILD_LOG=1 IGNORE_ERRORS=m V=s  # for 2 cores

built images are in bin/targets/ar71xx/generic/
for the Ubiquiti AirRouter, the images are lede-ar71xx-generic-ubnt-airrouter-squashfs-*.bin


Install:

connect to router over wired ethernet
find routers IP address with "ip a"
copy image to router
  scp bin/targets/ar71xx/generic/lede-ar71xx-generic-ubnt-airrouter-squashfs-sysupgrade.bin root@192.168.1.1:/tmp
flash image
  ssh root@192.168.1.1
  sysupgrade -v -n /tmp/lede-ar71xx-generic-ubnt-airrouter-squashfs-sysupgrade.bin
wait for router to reboot
change password on router
  ssh root:test@192.168.1.1
  passwd
edit /etc/config/network on router for address unique in local network e.g.
option ipaddr '192.168.8.1'
reboot router

Notes:

firmware upgrade docs:
https://lede-project.org/docs/user-guide/sysupgrade.cli
https://lede-project.org/docs/guide-quick-start/sysupgrade.luci

The sysupgrade image is used if openwrt or lede is already on the router. Otherwise the factory image is used.
Use the -n argument to erase any exisiting config.

Replace passwd step with copying shadow to build/files/etc/shadow
Replace ip address step with copying network to build/files/etc/config/network

The wifi is disabled by default.  You can only ssh in from a LAN port.  The LAN network
is 192.168.1.0/24 by default.
